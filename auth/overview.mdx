---
title: Authentication
description: How authentication works in InsForge
---

# Authentication

InsForge includes complete authentication with JWT-based sessions. Users, sessions, and permissions are built-in.

## How It Works

Authentication in InsForge follows a simple flow:

1. **Users register or login** → Credentials verified by backend auth service
2. **JWT access token issued** → Valid for 7 days
3. **Token sent with requests** → Backend validates and identifies user
4. **User data available** → Access user info from `_user` table

## The User Table

The `_user` table is special:
- **Read-only** through database API for security
- **Modified** only through auth endpoints
- **Referenced** by your tables with foreign keys
- **Protected** by the auth service's security policies

```sql
-- Your tables can reference users
CREATE TABLE posts (
  id UUID PRIMARY KEY,
  user_id UUID REFERENCES _user(id),
  content TEXT
);
```

## Session Management

Sessions are handled automatically:
- **Creation**: Login generates JWT access token
- **Storage**: Your app stores token (localStorage, cookies, etc.)
- **Usage**: Include as `Authorization: Bearer TOKEN` header
- **Expiration**: 7 days validity period

## OAuth Integration

Social login works out of the box. Just set environment variables:

```env
GOOGLE_CLIENT_ID=your-client-id
GOOGLE_CLIENT_SECRET=your-client-secret
```

The auth service handles the OAuth flow, token exchange, and user creation.

## Security Built-In

- **Password hashing** with bcrypt
- **Secure sessions** with signed tokens  
- **CSRF protection** automatically enabled
- **Rate limiting** on auth endpoints
- **Email verification** optional but available

## MCP Integration

AI assistants understand authentication through InsForge's MCP tools:

### Auth Documentation Tools

| Tool | Purpose | When AI Uses It |
|------|---------|-----------------|
| `get-auth-api` | Auth endpoints reference | Implementing login/register flows |
| `get-instructions` | Backend setup & rules | Understanding auth patterns |
| `debug-backend` | Troubleshoot auth issues | When auth calls fail |

### How AI Handles Auth

When you ask your AI to add authentication:

1. **Retrieves docs**: Calls `get-auth-api` for endpoint details
2. **Implements flow**: Creates login/register forms with proper endpoints
3. **Manages tokens**: Stores JWT access tokens in localStorage
4. **Protects routes**: Adds Authorization headers to API calls

Example:
```
You: "Add user login to my app"
AI: [Calls get-auth-api to understand endpoints]
AI: [Creates login form with /api/auth/sessions]
AI: [Implements token storage and protected API calls]
AI: "Added login functionality with JWT session management!"
```

The AI knows:
- `_user` table is read-only via database API
- Auth modifications go through `/api/auth/*` endpoints
- JWT access tokens needed for protected resources
- How to handle auth errors gracefully

## Next Steps

- [Implementing Authentication](/auth/better-auth)
- [OAuth Providers](/auth/oauth-providers)
- [Managing Users](/auth/users)